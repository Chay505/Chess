# Story 2.7: Contact Form & Footer

## Status
Draft

## Story
**As a** prospective student with specific questions,
**I want** contact form to reach the instructor directly,
**so that** I can ask questions not covered in FAQ before committing to a lesson.

## Acceptance Criteria
1. Contact form includes fields: Name, Email, Subject, Message
2. Form validation ensures all required fields completed before submission
3. Form submission sends email to instructor using Resend/SendGrid
4. Success message displayed after submission: "Thank you! We'll respond within 24 hours."
5. Error handling for failed submissions with user-friendly error messages
6. Form accessible and functional in both FR and EN locales
7. Footer includes social media links (optional), privacy policy link, copyright notice
8. Footer displays language toggle if not already in header
9. Footer links styled consistently with site design

## Tasks / Subtasks
- [ ] Create contact form component (AC: 1, 2)
  - [ ] Create `/components/ContactForm.tsx` component
  - [ ] Add form fields: Name, Email, Subject, Message
  - [ ] Implement client-side validation (required fields, email format)
  - [ ] Add error messages for invalid inputs
  - [ ] Style form with Tailwind CSS
- [ ] Implement form submission API (AC: 3)
  - [ ] Create API route: `/app/api/contact/route.ts`
  - [ ] Integrate Resend or SendGrid for email sending
  - [ ] Configure email template with form data
  - [ ] Send email to instructor's email address
  - [ ] Return success/error response
- [ ] Add success/error handling (AC: 4, 5)
  - [ ] Display success message after successful submission
  - [ ] Display error message if submission fails
  - [ ] Add loading state during submission
  - [ ] Clear form after successful submission
- [ ] Ensure bilingual support (AC: 6)
  - [ ] Create translation keys for form labels and messages
  - [ ] Test form in FR and EN locales
- [ ] Create footer component (AC: 7, 8, 9)
  - [ ] Create `/components/Footer.tsx` component
  - [ ] Add social media links (optional: LinkedIn, Twitter, Facebook)
  - [ ] Add privacy policy link (create placeholder page)
  - [ ] Add copyright notice with current year
  - [ ] Add language toggle if not in header
  - [ ] Style footer with brand colors
- [ ] Integrate components into homepage
  - [ ] Import and render ContactForm component
  - [ ] Import and render Footer component (in layout)
  - [ ] Position ContactForm after FAQ section
  - [ ] Position Footer at bottom of all pages

## Dev Notes

### Component Specifications
- **Contact Form Location:** `/components/ContactForm.tsx`
- **Footer Location:** `/components/Footer.tsx`
- **API Route:** `/app/api/contact/route.ts`
- **Email Service:** Resend (Free tier: 100 emails/day)
- **i18n Integration:** Use `next-intl` for translations

### Design Details from Front-End Spec
**Contact Form Layout:**
- Section heading: "Get in Touch" / "Contactez-nous"
- Form fields: Name (text), Email (email), Subject (text), Message (textarea)
- Submit button: "Send Message" / "Envoyer le message"
- Success message: Green banner with checkmark icon
- Error message: Red banner with error icon

**Form Styling:**
- Input fields: White background, gray border, focus:ring
- Labels: 14px, weight 500, above inputs
- Required fields: Marked with asterisk (*)
- Submit button: Primary button style (teal background)
- Textarea: Minimum 4 rows

**Footer Layout:**
- 3-column grid (desktop), stacked (mobile)
- Column 1: Logo and tagline
- Column 2: Quick links (About, Pricing, FAQ, Contact)
- Column 3: Social media icons, language toggle
- Bottom bar: Copyright notice, Privacy Policy link

**Footer Styling:**
- Background: `#2C3E50` (dark blue-gray)
- Text color: `#FFFFFF` (white)
- Link hover: `#4A9B8E` (teal)
- Padding: 48px (top/bottom)

### Email Service Configuration (Resend)
```bash
npm install resend
```

**Environment Variables:**
```
RESEND_API_KEY=your_api_key
INSTRUCTOR_EMAIL=instructor@example.com
```

### Example Code Structure
```tsx
// components/ContactForm.tsx
'use client';
import { useState } from 'react';
import { useTranslations } from 'next-intl';

export default function ContactForm() {
  const t = useTranslations('contact');
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    subject: '',
    message: ''
  });
  const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setStatus('loading');

    try {
      const res = await fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      });

      if (res.ok) {
        setStatus('success');
        setFormData({ name: '', email: '', subject: '', message: '' });
      } else {
        setStatus('error');
      }
    } catch (error) {
      setStatus('error');
    }
  };

  return (
    <section className="py-16 px-6 md:py-24 bg-gray-50">
      <div className="max-w-2xl mx-auto">
        <h2 className="text-3xl md:text-4xl font-semibold text-gray-800 mb-8 text-center">
          {t('heading')}
        </h2>

        <form onSubmit={handleSubmit} className="bg-white rounded-lg shadow-lg p-8">
          <div className="mb-4">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              {t('name')} *
            </label>
            <input
              type="text"
              required
              value={formData.name}
              onChange={(e) => setFormData({ ...formData, name: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
            />
          </div>

          <div className="mb-4">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              {t('email')} *
            </label>
            <input
              type="email"
              required
              value={formData.email}
              onChange={(e) => setFormData({ ...formData, email: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
            />
          </div>

          <div className="mb-4">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              {t('subject')} *
            </label>
            <input
              type="text"
              required
              value={formData.subject}
              onChange={(e) => setFormData({ ...formData, subject: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
            />
          </div>

          <div className="mb-6">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              {t('message')} *
            </label>
            <textarea
              required
              rows={4}
              value={formData.message}
              onChange={(e) => setFormData({ ...formData, message: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
            />
          </div>

          {status === 'success' && (
            <div className="mb-4 p-4 bg-green-50 border border-green-200 text-green-800 rounded-lg">
              {t('success')}
            </div>
          )}

          {status === 'error' && (
            <div className="mb-4 p-4 bg-red-50 border border-red-200 text-red-800 rounded-lg">
              {t('error')}
            </div>
          )}

          <button
            type="submit"
            disabled={status === 'loading'}
            className="w-full bg-teal-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-teal-700 transition disabled:opacity-50"
          >
            {status === 'loading' ? t('sending') : t('submit')}
          </button>
        </form>
      </div>
    </section>
  );
}
```

```ts
// app/api/contact/route.ts
import { NextResponse } from 'next/server';
import { Resend } from 'resend';

const resend = new Resend(process.env.RESEND_API_KEY);

export async function POST(request: Request) {
  try {
    const { name, email, subject, message } = await request.json();

    await resend.emails.send({
      from: 'website@yourdomain.com',
      to: process.env.INSTRUCTOR_EMAIL || '',
      subject: `Contact Form: ${subject}`,
      html: `
        <h2>New Contact Form Submission</h2>
        <p><strong>Name:</strong> ${name}</p>
        <p><strong>Email:</strong> ${email}</p>
        <p><strong>Subject:</strong> ${subject}</p>
        <p><strong>Message:</strong></p>
        <p>${message}</p>
      `
    });

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('Contact form error:', error);
    return NextResponse.json({ error: 'Failed to send message' }, { status: 500 });
  }
}
```

### Translation Keys Example
```json
// messages/en.json
{
  "contact": {
    "heading": "Get in Touch",
    "name": "Name",
    "email": "Email",
    "subject": "Subject",
    "message": "Message",
    "submit": "Send Message",
    "sending": "Sending...",
    "success": "Thank you! We'll respond within 24 hours.",
    "error": "Failed to send message. Please try again."
  }
}
```

### Testing
- **Form Validation:** Test with empty fields, invalid email format
- **Submission:** Submit form and verify email received by instructor
- **Success/Error States:** Test success and error message display
- **Loading State:** Verify button shows "Sending..." during submission
- **Responsive:** Test form on mobile, tablet, desktop
- **i18n:** Toggle language and verify form labels update
- **Accessibility:** Test with keyboard navigation, screen reader

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-24 | 1.0 | Initial story creation | John (PM Agent) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
