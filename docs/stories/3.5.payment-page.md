# Story 3.5: Stripe Payment Link Page (Static)

## Status
Draft

## Story
**As a** student,
**I want** page displaying payment instructions after I book via Calendly,
**so that** I know how to pay for my lesson.

## Acceptance Criteria
1. Static page created at `/payment` explaining payment process
2. Page includes general Stripe payment instructions
3. Instructions: "After booking via Calendly, the instructor will send you a payment link via email"
4. Optional: Generic Stripe payment link displayed if instructor creates one
5. Bilingual content (FR/EN)
6. Clear, simple messaging to reduce confusion

## Tasks / Subtasks
- [ ] Create payment page (AC: 1)
  - [ ] Create `/app/[locale]/payment/page.tsx`
  - [ ] Make page publicly accessible (no authentication required)
  - [ ] Style with brand colors and typography
- [ ] Add payment instructions (AC: 2, 3)
  - [ ] Explain the payment process step-by-step
  - [ ] Mention Stripe as payment provider
  - [ ] Clarify timeline: "Payment link sent within 24 hours of booking"
  - [ ] Add reassurance: "Secure payment via Stripe (no card data stored)"
- [ ] Add optional payment link (AC: 4)
  - [ ] Create configuration for instructor's generic Stripe payment link
  - [ ] Display link as button: "Pay Now" / "Payer maintenant"
  - [ ] Add note: "Or wait for personalized payment link in your email"
- [ ] Ensure bilingual support (AC: 5, 6)
  - [ ] Create translation keys for all payment page content
  - [ ] Test in FR and EN locales
  - [ ] Ensure messaging is clear and non-technical
- [ ] Add trust indicators
  - [ ] Display Stripe logo (trusted payment provider)
  - [ ] Add security icons (lock, shield)
  - [ ] Mention PCI compliance
- [ ] Link from booking confirmation
  - [ ] Update Calendly confirmation message to mention payment page
  - [ ] Provide link to `/payment` page

## Dev Notes

### Component Specifications
- **Payment Page:** `/app/[locale]/payment/page.tsx`
- **Styling:** Tailwind CSS with centered card layout
- **i18n Integration:** Use `next-intl` for translations

### Design Details from Front-End Spec
**Payment Page Layout:**
- Centered card layout
- Section heading: "Payment Information" / "Informations de paiement"
- Step-by-step instructions (numbered list)
- Optional: Stripe payment button
- Trust indicators (Stripe logo, security icons)
- Contact information for questions

**Card Design:**
- Max-width: 600px
- Background: White (#FFFFFF)
- Shadow: shadow-lg
- Padding: 48px (desktop), 32px (mobile)
- Border-radius: 8px

**Typography:**
- H1: 36px (desktop), 28px (mobile), weight 600
- Body: 16px, weight 400, line-height 1.6
- Instructions: Numbered list with 18px font

**Color Palette:**
- Background: `#F8F9FA` (off-white)
- Card background: `#FFFFFF`
- Heading: `#2C3E50` (dark blue-gray)
- Body text: `#7F8C8D` (medium gray)
- Button: `#4A9B8E` (teal)

### Stripe Payment Link Configuration
If instructor creates a generic Stripe payment link:
- Product: "Chess Lesson (60 minutes)"
- Price: $40
- Payment methods: Credit card, debit card
- Allow promotional codes: Optional
- Success URL: Redirect to thank you page

### Example Code Structure
```tsx
// app/[locale]/payment/page.tsx
import { useTranslations } from 'next-intl';
import { CheckCircleIcon, ShieldCheckIcon } from '@heroicons/react/24/outline';

export default function PaymentPage() {
  const t = useTranslations('payment');

  // Optional: Instructor's generic Stripe payment link
  const stripePaymentLink = process.env.NEXT_PUBLIC_STRIPE_PAYMENT_LINK;

  return (
    <div className="min-h-screen bg-gray-50 py-16 px-6">
      <div className="max-w-2xl mx-auto">
        <div className="bg-white rounded-lg shadow-lg p-8 md:p-12">
          <h1 className="text-3xl md:text-4xl font-semibold text-gray-800 mb-8 text-center">
            {t('heading')}
          </h1>

          <div className="prose prose-lg max-w-none mb-8">
            <p className="text-gray-600 mb-6">
              {t('intro')}
            </p>

            <h2 className="text-xl font-semibold text-gray-800 mb-4">
              {t('howItWorks.heading')}
            </h2>
            <ol className="space-y-3 text-gray-600">
              <li>{t('howItWorks.step1')}</li>
              <li>{t('howItWorks.step2')}</li>
              <li>{t('howItWorks.step3')}</li>
              <li>{t('howItWorks.step4')}</li>
            </ol>
          </div>

          {stripePaymentLink && (
            <div className="mb-8">
              <div className="bg-teal-50 border border-teal-200 rounded-lg p-6 mb-4">
                <p className="text-teal-800 mb-4">
                  {t('quickPayOption')}
                </p>
                <a
                  href={stripePaymentLink}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="block w-full bg-teal-600 text-white text-center px-6 py-3 rounded-lg font-medium hover:bg-teal-700 transition"
                >
                  {t('payNow')}
                </a>
              </div>
              <p className="text-sm text-gray-500 text-center">
                {t('orWaitForEmail')}
              </p>
            </div>
          )}

          <div className="border-t border-gray-200 pt-6">
            <div className="flex items-center justify-center space-x-4 mb-4">
              <ShieldCheckIcon className="w-6 h-6 text-green-600" />
              <span className="text-gray-600">{t('securePayment')}</span>
            </div>
            <div className="flex items-center justify-center space-x-4">
              <CheckCircleIcon className="w-6 h-6 text-green-600" />
              <span className="text-gray-600">{t('pciCompliant')}</span>
            </div>
          </div>

          <div className="mt-8 text-center text-sm text-gray-500">
            {t('questions')}
          </div>
        </div>
      </div>
    </div>
  );
}
```

### Translation Keys Example
```json
// messages/en.json
{
  "payment": {
    "heading": "Payment Information",
    "intro": "Thank you for booking a chess lesson! Here's how to complete your payment.",
    "howItWorks": {
      "heading": "How Payment Works",
      "step1": "After booking via Calendly, you'll receive a confirmation email.",
      "step2": "Within 24 hours, the instructor will send you a secure Stripe payment link.",
      "step3": "Click the link and pay online with your credit/debit card.",
      "step4": "Once payment is confirmed, you'll receive your lesson details and portal access."
    },
    "quickPayOption": "Prefer to pay now? Use the button below to pay immediately.",
    "payNow": "Pay $40 Now",
    "orWaitForEmail": "Or wait for the personalized payment link in your email.",
    "securePayment": "Secure payment via Stripe",
    "pciCompliant": "PCI compliant - Your card data is never stored",
    "questions": "Questions? Contact us at instructor@example.com"
  }
}

// messages/fr.json
{
  "payment": {
    "heading": "Informations de paiement",
    "intro": "Merci d'avoir réservé une leçon d'échecs! Voici comment effectuer votre paiement.",
    "howItWorks": {
      "heading": "Comment fonctionne le paiement",
      "step1": "Après avoir réservé via Calendly, vous recevrez un courriel de confirmation.",
      "step2": "Dans les 24 heures, l'instructeur vous enverra un lien de paiement sécurisé Stripe.",
      "step3": "Cliquez sur le lien et payez en ligne avec votre carte de crédit/débit.",
      "step4": "Une fois le paiement confirmé, vous recevrez les détails de votre leçon et l'accès au portail."
    },
    "quickPayOption": "Préférez payer maintenant? Utilisez le bouton ci-dessous pour payer immédiatement.",
    "payNow": "Payer 40$ maintenant",
    "orWaitForEmail": "Ou attendez le lien de paiement personnalisé dans votre courriel.",
    "securePayment": "Paiement sécurisé via Stripe",
    "pciCompliant": "Conforme PCI - Vos données de carte ne sont jamais stockées",
    "questions": "Des questions? Contactez-nous à instructor@example.com"
  }
}
```

### Environment Variables
```
# Optional: Generic Stripe payment link
NEXT_PUBLIC_STRIPE_PAYMENT_LINK=https://buy.stripe.com/...
```

### Testing
- **Page Display:** Navigate to `/payment` and verify page displays correctly
- **Instructions:** Verify all steps are clear and easy to understand
- **Stripe Link:** If configured, click "Pay Now" button and verify Stripe checkout opens
- **Bilingual:** Toggle language and verify all content updates
- **Trust Indicators:** Verify security icons and messaging display
- **Responsive:** Test on mobile, tablet, desktop
- **Navigation:** Verify back button returns to homepage

### Integration with Calendly
Update Calendly event confirmation page to mention:
- "Payment instructions have been sent to your email"
- "Or visit [yourwebsite.com/payment] for payment information"

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-24 | 1.0 | Initial story creation | John (PM Agent) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
