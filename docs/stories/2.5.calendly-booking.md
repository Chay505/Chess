# Story 2.5: Embedded Calendly Booking Widget

## Status
Draft

## Story
**As a** prospective student,
**I want** embedded booking calendar directly on the website showing real-time availability,
**so that** I can select a convenient lesson time and complete booking without leaving the site.

## Acceptance Criteria
1. Calendly widget embedded on dedicated "Book a Lesson" page or section
2. Widget displays instructor's real-time availability based on Calendly configuration
3. "1-on-1 Chess Lesson" event type configured in Calendly (60 minutes, $40/hour)
4. Widget styled to match website branding (colors, fonts where Calendly allows customization)
5. Booking flow collects student name, email, optional message/questions
6. After booking, Calendly confirmation displayed with next steps (payment instructions to follow)
7. Widget fully responsive on mobile devices (touch-friendly interaction)
8. Language of widget follows site locale (Calendly supports FR/EN if configured)
9. Section includes instructional text: "Select a time below. Payment instructions will be sent to you."

## Tasks / Subtasks
- [ ] Configure Calendly event (AC: 3)
  - [ ] Log into Calendly account (Free tier)
  - [ ] Create "1-on-1 Chess Lesson" event type
  - [ ] Set duration: 60 minutes
  - [ ] Add description mentioning $40/hour rate
  - [ ] Configure availability hours
  - [ ] Set buffer times between lessons (optional)
- [ ] Embed Calendly widget (AC: 1, 2)
  - [ ] Create `/components/Booking.tsx` component
  - [ ] Use Calendly embed code or react-calendly package
  - [ ] Configure widget to display inline (not popup)
  - [ ] Pass instructor's Calendly URL
- [ ] Customize widget styling (AC: 4)
  - [ ] Configure Calendly branding colors (primary: #4A9B8E)
  - [ ] Ensure widget matches site typography where possible
  - [ ] Remove Calendly branding if allowed on Free tier
- [ ] Configure booking form fields (AC: 5, 6)
  - [ ] Ensure form collects: Name, Email, Optional message
  - [ ] Configure confirmation page with next steps message
  - [ ] Add custom confirmation message: "Payment instructions will be sent via email"
- [ ] Implement responsive design (AC: 7)
  - [ ] Test widget on mobile devices (iOS, Android)
  - [ ] Ensure touch interactions work smoothly
  - [ ] Verify widget doesn't overflow on small screens
- [ ] Add bilingual support (AC: 8, 9)
  - [ ] Configure Calendly to support FR/EN (if available)
  - [ ] Add instructional text above widget in both languages
  - [ ] Create translation keys for instructional text
- [ ] Integrate booking section into homepage
  - [ ] Import and render Booking component
  - [ ] Add section ID "booking" for scroll navigation
  - [ ] Position after Testimonials section
  - [ ] Add section heading: "Book Your First Lesson"

## Dev Notes

### Component Specifications
- **Location:** `/components/Booking.tsx`
- **Calendly Integration:** Use `react-calendly` package or direct embed script
- **i18n Integration:** Use `next-intl` for instructional text

### Calendly Configuration
**Event Type Setup:**
- Name: "1-on-1 Chess Lesson"
- Duration: 60 minutes
- Location: Zoom or Google Meet (add meeting link automatically)
- Description: "Personalized chess instruction for beginners (ages 5-55, rating 0-1200). Bilingual instruction available (FR/EN). $40/hour."
- Questions: Name, Email, Optional message/questions

**Availability:**
- Configure instructor's available hours
- Buffer time: 15 minutes between lessons (optional)
- Timezone: Detect automatically or ask user

**Confirmation Page:**
- Custom message: "Thank you for booking! Payment instructions will be sent to your email shortly. We look forward to your lesson!"

### Design Details from Front-End Spec
**Booking Section Layout:**
- Section heading: "Book Your First Lesson" / "Réservez votre première leçon"
- Instructional text: "Select a time below. Payment instructions will be sent to you."
- Embedded Calendly widget (full-width on mobile, centered on desktop)
- Max-width: 900px (centered)

**Calendly Branding:**
- Primary color: `#4A9B8E` (teal/green)
- Background: White
- Text color: `#2C3E50` (dark blue-gray)

**Responsive:**
- Mobile: Full-width widget, stack time slots vertically
- Desktop: Centered widget with sidebar calendar view

### Example Code Structure
```tsx
// components/Booking.tsx
import { useTranslations } from 'next-intl';
import { InlineWidget } from 'react-calendly';

export default function Booking() {
  const t = useTranslations('booking');

  return (
    <section id="booking" className="py-16 px-6 md:py-24 bg-gray-50">
      <div className="max-w-4xl mx-auto">
        <h2 className="text-3xl md:text-4xl font-semibold text-gray-800 mb-4 text-center">
          {t('heading')}
        </h2>
        <p className="text-center text-gray-600 mb-8">
          {t('instructions')}
        </p>

        <div className="bg-white rounded-lg shadow-lg overflow-hidden">
          <InlineWidget
            url="https://calendly.com/your-instructor/chess-lesson"
            styles={{
              height: '700px'
            }}
            pageSettings={{
              backgroundColor: 'ffffff',
              hideEventTypeDetails: false,
              hideLandingPageDetails: false,
              primaryColor: '4A9B8E',
              textColor: '2C3E50'
            }}
          />
        </div>

        <div className="mt-6 text-center text-sm text-gray-500">
          {t('note')}
        </div>
      </div>
    </section>
  );
}
```

### Package Installation
```bash
npm install react-calendly
```

### Translation Keys Example
```json
// messages/en.json
{
  "booking": {
    "heading": "Book Your First Lesson",
    "instructions": "Select a convenient time below. Payment instructions will be sent to your email after booking.",
    "note": "Having trouble? Contact us directly for assistance."
  }
}

// messages/fr.json
{
  "booking": {
    "heading": "Réservez votre première leçon",
    "instructions": "Sélectionnez un horaire pratique ci-dessous. Les instructions de paiement vous seront envoyées par courriel après la réservation.",
    "note": "Vous rencontrez des difficultés? Contactez-nous directement pour obtenir de l'aide."
  }
}
```

### Testing
- **Functional:** Complete a test booking and verify confirmation email received
- **Responsive:** Test widget on mobile (iOS Safari, Chrome Android) and desktop
- **Touch:** Verify touch interactions work smoothly on mobile devices
- **Styling:** Verify widget colors match brand palette
- **i18n:** Test with FR/EN locales if Calendly supports language switching
- **Accessibility:** Ensure widget is keyboard navigable
- **Edge Cases:** Test booking flow with invalid email, no time slots available

### Calendly Documentation
- Embed options: https://help.calendly.com/hc/en-us/articles/223147027
- react-calendly: https://www.npmjs.com/package/react-calendly

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-24 | 1.0 | Initial story creation | John (PM Agent) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
